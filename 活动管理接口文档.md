# 活动管理接口文档（社团管理员/系统管理员）

> **权限说明**：以下所有接口，系统管理员（system_admin）拥有完全访问权限，无需验证社团负责人身份。

## 1. 创建活动

### 接口信息
- **接口路径**: `POST /club-admin/activity/create`
- **接口描述**: 社团负责人创建活动
- **权限要求**: 需要登录（user角色）且为社团负责人，或者为系统管理员

### 请求参数

#### 请求体（JSON）
```json
{
  "clubId": 1,
  "title": "社团迎新晚会",
  "content": "欢迎新成员加入我们社团，本次晚会将有精彩的节目表演、互动游戏和抽奖环节。期待大家的到来！",
  "cover": "https://example.com/images/welcome-party.jpg",
  "location": "学校大礼堂",
  "startTime": "2024-03-15 18:00:00",
  "endTime": "2024-03-15 21:00:00",
  "signupStartTime": "2024-03-01 00:00:00",
  "signupEndTime": "2024-03-14 23:59:59",
  "maxMembers": 100
}
```

#### 参数说明
| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| clubId | Long | 是 | 所属社团ID |
| title | String | 是 | 活动标题 |
| content | String | 是 | 活动内容详情 |
| cover | String | 否 | 活动封面图URL |
| location | String | 否 | 活动地点 |
| startTime | String | 是 | 活动开始时间，格式：yyyy-MM-dd HH:mm:ss |
| endTime | String | 是 | 活动结束时间，格式：yyyy-MM-dd HH:mm:ss |
| signupStartTime | String | 否 | 报名开始时间，格式：yyyy-MM-dd HH:mm:ss |
| signupEndTime | String | 否 | 报名截止时间，格式：yyyy-MM-dd HH:mm:ss |
| maxMembers | Integer | 否 | 最大报名人数，NULL表示不限制 |

### 响应结果

#### 成功响应
```json
{
  "code": 200,
  "message": "活动创建成功，等待系统管理员审核",
  "data": null
}
```

#### 失败响应
```json
{
  "code": 500,
  "message": "错误信息",
  "data": null
}
```

---

## 2. 更新活动

### 接口信息
- **接口路径**: `PUT /club-admin/activity/{id}`
- **接口描述**: 社团负责人更新活动信息
- **权限要求**: 需要登录（user角色）且为该活动所属社团的负责人

### 请求参数

#### 路径参数
| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| id | Long | 是 | 活动ID |

#### 请求体（JSON）
```json
{
  "title": "社团迎新晚会（更新）",
  "content": "活动内容有所调整，增加了更多互动环节...",
  "cover": "https://example.com/images/welcome-party-v2.jpg",
  "location": "新的活动地点：体育馆",
  "startTime": "2024-03-15 19:00:00",
  "endTime": "2024-03-15 22:00:00",
  "signupStartTime": "2024-03-01 00:00:00",
  "signupEndTime": "2024-03-14 23:59:59",
  "maxMembers": 150
}
```

#### 参数说明
| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| title | String | 否 | 活动标题 |
| content | String | 否 | 活动内容详情 |
| cover | String | 否 | 活动封面图URL |
| location | String | 否 | 活动地点 |
| startTime | String | 否 | 活动开始时间，格式：yyyy-MM-dd HH:mm:ss |
| endTime | String | 否 | 活动结束时间，格式：yyyy-MM-dd HH:mm:ss |
| signupStartTime | String | 否 | 报名开始时间，格式：yyyy-MM-dd HH:mm:ss |
| signupEndTime | String | 否 | 报名截止时间，格式：yyyy-MM-dd HH:mm:ss |
| maxMembers | Integer | 否 | 最大报名人数，NULL表示不限制 |

**注意**: 所有字段均为可选，只需传入需要更新的字段

### 响应结果

#### 成功响应
```json
{
  "code": 200,
  "message": "活动更新成功",
  "data": null
}
```

#### 失败响应
```json
{
  "code": 500,
  "message": "错误信息",
  "data": null
}
```

---

## 3. 取消活动

### 接口信息
- **接口路径**: `PUT /club-admin/activity/{id}/cancel`
- **接口描述**: 社团负责人取消活动
- **权限要求**: 需要登录（user角色）且为该活动所属社团的负责人

### 请求参数

#### 路径参数
| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| id | Long | 是 | 活动ID |

#### 请求示例
```
PUT /club-admin/activity/123/cancel
```

### 响应结果

#### 成功响应
```json
{
  "code": 200,
  "message": "活动已取消",
  "data": null
}
```

#### 失败响应
```json
{
  "code": 500,
  "message": "错误信息",
  "data": null
}
```

---

## 4. 查看活动报名列表

### 接口信息
- **接口路径**: `GET /club-admin/activity/{id}/signups`
- **接口描述**: 社团负责人查看活动的所有报名人员
- **权限要求**: 需要登录（user角色）且为该活动所属社团的负责人

### 请求参数

#### 路径参数
| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| id | Long | 是 | 活动ID |

#### 查询参数
| 参数名 | 类型 | 必填 | 默认值 | 说明 |
|--------|------|------|--------|------|
| pageNum | Integer | 否 | 1 | 页码 |
| pageSize | Integer | 否 | 10 | 每页数量 |

#### 请求示例
```
GET /club-admin/activity/123/signups?pageNum=1&pageSize=10
```

### 响应结果

#### 成功响应
```json
{
  "code": 200,
  "message": "操作成功",
  "data": {
    "records": [
      {
        "id": 1,
        "activityId": 123,
        "activityTitle": "社团迎新晚会",
        "userId": 10001,
        "username": "zhangsan",
        "realName": "张三",
        "studentId": "2024001",
        "status": "registered",
        "signupTime": "2024-03-05T10:30:00",
        "checkinTime": null,
        "remark": null
      },
      {
        "id": 2,
        "activityId": 123,
        "activityTitle": "社团迎新晚会",
        "userId": 10002,
        "username": "lisi",
        "realName": "李四",
        "studentId": "2024002",
        "status": "checked_in",
        "signupTime": "2024-03-05T11:20:00",
        "checkinTime": "2024-03-15T18:05:00",
        "remark": null
      }
    ],
    "total": 50,
    "size": 10,
    "current": 1,
    "pages": 5
  }
}
```

#### 响应数据说明
| 字段名 | 类型 | 说明 |
|--------|------|------|
| records | Array | 报名记录列表 |
| records[].id | Long | 报名记录ID |
| records[].activityId | Long | 活动ID |
| records[].activityTitle | String | 活动标题 |
| records[].userId | Long | 用户ID |
| records[].username | String | 用户名 |
| records[].realName | String | 真实姓名 |
| records[].studentId | String | 学号 |
| records[].status | String | 报名状态：registered-已报名, cancelled-已取消, checked_in-已签到, absent-缺席 |
| records[].signupTime | String | 报名时间 |
| records[].checkinTime | String | 签到时间（未签到为null） |
| records[].remark | String | 备注信息 |
| total | Long | 总记录数 |
| size | Integer | 每页数量 |
| current | Integer | 当前页码 |
| pages | Integer | 总页数 |

#### 失败响应
```json
{
  "code": 500,
  "message": "错误信息",
  "data": null
}
```

---

## 5. 活动签到/标记缺席

### 接口信息
- **接口路径**: `POST /club-admin/activity/{id}/checkin`
- **接口描述**: 社团负责人为报名用户签到或标记缺席
- **权限要求**: 需要登录（user角色）且为该活动所属社团的负责人

### 请求参数

#### 路径参数
| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| id | Long | 是 | 活动ID |

#### 请求体（JSON）

##### 签到示例
```json
{
  "userIds": [10001, 10002, 10003],
  "action": "check_in"
}
```

##### 标记缺席示例
```json
{
  "userIds": [10004, 10005],
  "action": "absent"
}
```

#### 参数说明
| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| userIds | Array\<Long\> | 是 | 用户ID列表，支持批量操作 |
| action | String | 是 | 操作类型：check_in-签到, absent-标记缺席 |

### 响应结果

#### 成功响应
```json
{
  "code": 200,
  "message": "操作成功",
  "data": null
}
```

#### 失败响应
```json
{
  "code": 500,
  "message": "错误信息",
  "data": null
}
```

---

## 通用说明

### 状态码说明
- `200`: 请求成功
- `500`: 服务器错误
- `401`: 未登录或登录已过期
- `403`: 权限不足
- `404`: 资源不存在

### 报名状态枚举
- `registered`: 已报名
- `cancelled`: 已取消
- `checked_in`: 已签到
- `absent`: 缺席

### 认证说明
所有接口都需要在请求头中携带身份认证信息（Token），具体格式请参考系统认证文档。

### 时间格式
所有时间字段统一使用格式：`yyyy-MM-dd HH:mm:ss`
例如：`2024-03-15 18:00:00`

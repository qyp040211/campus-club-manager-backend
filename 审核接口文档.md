# 审核接口文档

## 目录
- [1. 审核社团申请接口](#1-审核社团申请接口)
- [2. 审核活动接口](#2-审核活动接口)

---

## 1. 审核社团申请接口

### 基本信息
- **接口路径**: `/admin/club/applications/review`
- **请求方法**: `POST`
- **接口描述**: 系统管理员审核用户的社团加入申请,可以选择通过或拒绝申请
- **权限要求**: 需要 `system_admin` 角色

### 请求头
```
Content-Type: application/json
Authorization: Bearer {token}
```

### 请求参数

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| applicationId | Long | 是 | 申请记录的ID |
| status | String | 是 | 审核结果,可选值: `approved`(通过) 或 `rejected`(拒绝) |
| reviewNote | String | 否 | 审核备注信息 |

### 请求参数约束
- `applicationId`: 不能为空
- `status`: 不能为空,必须是 `approved` 或 `rejected`
- `reviewNote`: 可选,建议在拒绝时填写拒绝原因

### 请求示例

#### 示例 1: 通过申请
```json
{
  "applicationId": 1001,
  "status": "approved",
  "reviewNote": "符合入社条件,同意加入"
}
```

#### 示例 2: 拒绝申请(带详细备注)
```json
{
  "applicationId": 1002,
  "status": "rejected",
  "reviewNote": "申请理由不充分,建议补充个人特长和对社团的贡献计划"
}
```

#### 示例 3: 拒绝申请(不填备注)
```json
{
  "applicationId": 1003,
  "status": "rejected"
}
```

#### 示例 4: 通过申请(无备注)
```json
{
  "applicationId": 1004,
  "status": "approved"
}
```

### 响应示例

#### 成功响应
```json
{
  "code": 200,
  "message": "审核完成",
  "data": null
}
```

#### 失败响应 - 参数校验失败
```json
{
  "code": 400,
  "message": "申请ID不能为空",
  "data": null
}
```

#### 失败响应 - 申请不存在
```json
{
  "code": 404,
  "message": "申请记录不存在",
  "data": null
}
```

#### 失败响应 - 权限不足
```json
{
  "code": 403,
  "message": "无权限操作",
  "data": null
}
```

### 业务说明
1. 只有 `system_admin` 角色的用户才能调用此接口
2. 审核通过后,用户将正式成为该社团成员
3. 审核拒绝后,申请状态变更为已拒绝,用户可能需要重新申请
4. 建议在拒绝申请时填写 `reviewNote`,帮助用户了解拒绝原因

---

## 2. 审核活动接口

### 基本信息
- **接口路径**: `/admin/activity/{id}/review`
- **请求方法**: `PUT`
- **接口描述**: 系统管理员审核社团提交的活动申请,可以选择通过或拒绝
- **权限要求**: 需要 `system_admin` 角色

### 请求头
```
Content-Type: application/json
Authorization: Bearer {token}
```

### 路径参数

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| id | Long | 是 | 活动ID,在URL路径中指定 |

### 请求体参数

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| status | String | 是 | 审核状态,可选值: `published`(通过发布) 或 `rejected`(拒绝) |
| note | String | 否 | 审核备注信息 |

### 请求参数约束
- `id`: URL路径参数,必须是有效的活动ID
- `status`: 不能为空,必须是 `published` 或 `rejected`
- `note`: 可选,建议在拒绝时填写具体原因

### 请求示例

#### 示例 1: 通过活动审核
```
PUT /admin/activity/2001/review
```
```json
{
  "status": "published",
  "note": "活动计划详细,符合学校规定,准予发布"
}
```

#### 示例 2: 拒绝活动(带详细说明)
```
PUT /admin/activity/2002/review
```
```json
{
  "status": "rejected",
  "note": "活动时间与其他重要活动冲突,建议调整至下周末重新提交"
}
```

#### 示例 3: 拒绝活动(安全原因)
```
PUT /admin/activity/2003/review
```
```json
{
  "status": "rejected",
  "note": "活动涉及户外拓展,安全预案不完善,请补充应急处理方案和保险证明"
}
```

#### 示例 4: 通过活动(无备注)
```
PUT /admin/activity/2004/review
```
```json
{
  "status": "published"
}
```

#### 示例 5: 拒绝活动(内容问题)
```
PUT /admin/activity/2005/review
```
```json
{
  "status": "rejected",
  "note": "活动内容描述不清晰,缺少具体流程和预期参与人数,请完善后重新提交"
}
```

### 响应示例

#### 成功响应
```json
{
  "code": 200,
  "message": "审核完成",
  "data": null
}
```

#### 失败响应 - 参数校验失败
```json
{
  "code": 400,
  "message": "审核状态不能为空",
  "data": null
}
```

#### 失败响应 - 活动不存在
```json
{
  "code": 404,
  "message": "活动不存在",
  "data": null
}
```

#### 失败响应 - 权限不足
```json
{
  "code": 403,
  "message": "无权限操作",
  "data": null
}
```

#### 失败响应 - 状态值错误
```json
{
  "code": 400,
  "message": "状态值必须是 published 或 rejected",
  "data": null
}
```

### 业务说明
1. 只有 `system_admin` 角色的用户才能调用此接口
2. 审核通过(`published`)后,活动将正式发布,学生可以看到并报名参加
3. 审核拒绝(`rejected`)后,活动状态变更为已拒绝,社团需要根据备注修改后重新提交
4. 强烈建议在拒绝时填写 `note`,说明具体原因,帮助社团改进活动方案
5. 活动审核关系到校园安全和活动质量,请认真审查活动内容、时间、地点、安全措施等

---

## 附录

### 通用错误码说明

| 错误码 | 说明 |
|--------|------|
| 200 | 请求成功 |
| 400 | 请求参数错误或校验失败 |
| 401 | 未登录或token失效 |
| 403 | 权限不足 |
| 404 | 资源不存在 |
| 500 | 服务器内部错误 |

### 审核状态值对照表

#### 社团申请审核状态
| 状态值 | 说明 |
|--------|------|
| approved | 审核通过 |
| rejected | 审核拒绝 |

#### 活动审核状态
| 状态值 | 说明 |
|--------|------|
| published | 审核通过并发布 |
| rejected | 审核拒绝 |

### 最佳实践建议

1. **审核备注规范**
   - 通过时:说明通过原因或鼓励性评语
   - 拒绝时:明确指出问题所在和改进方向

2. **拒绝原因常见类型**
   - 资料不完整
   - 不符合规定
   - 时间冲突
   - 安全隐患
   - 内容不当

3. **审核时效**
   - 建议在24小时内完成审核
   - 重大活动应当加急处理
